<app-header></app-header>

<article class="min-h-screen md:flex md:items-start md:justify-center bg-gray-100 overflow-hidden">
  <section class="m-5 overflow-x-auto">
    
    <!-- Header + Search -->
    <div class="flex flex-col items-center justify-center mb-5 gap-4">
      <h1 class="text-2xl font-bold text-gray-900">Pesquise uma Pessoa</h1>
     
      <app-filter class="w-full" (search)="onFilter($event)"></app-filter>
    </div>

    <!-- People Table -->
    <app-table
    *ngIf="hasSearched && filteredPeople.length > 0"
     [fields]="[
        { name: 'nomeCompleto', label: 'Nome Completo' },
        { name: 'dataNascimento', label: 'Data Nasc.' },
        { name: 'email', label: 'Email' },
        { name: 'celular', label: 'Celular' },
        { name: 'tipo', label: 'Tipo' },
        { name: 'documento', label: 'Documento' },
      ]"
      [data]="filteredPeople"
      [actions]="['editar', 'deletar']"
      [actionType]="'icons'"
      (actionEvent)="handleEditDelete($event)">
    </app-table>
    
    <!-- Optional message when there are no results -->
    <p *ngIf="hasSearched && filteredPeople.length === 0" class="text-center text-gray-500 mt-6">
      Nenhum resultado encontrado.
    </p>

    <!-- Confirmation Modal-->
    <app-confirmation-modal
      [showModal]="showModal"
      title="Excluir UsuÃ¡rio"
      subtitle="Deseja excluir o usuÃ¡rio"
      [personName]="peopleForDeletName"
      actionText="Excluir"
      [loading]="loading"
      (confirm)="confirmDeletion()"
      (cancel)="closeModal()"
    >
    </app-confirmation-modal>

  </section>
</article>
